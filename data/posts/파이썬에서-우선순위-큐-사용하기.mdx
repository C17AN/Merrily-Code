---
title: íŒŒì´ì¬ì—ì„œ ìš°ì„ ìˆœìœ„ í ì‚¬ìš©í•˜ê¸°
date: "2022-01-30"
description: ì½”ë”© í…ŒìŠ¤íŠ¸ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” íŒŒì´ì¬ heapq ëª¨ë“ˆì„ ì†Œê°œí•©ë‹ˆë‹¤.
category: python
thumbnailUrl: "/thumbnails/python.svg"
tags: ["Python", "ì•Œê³ ë¦¬ì¦˜"]
---

ë•Œë•Œë¡œ í”„ë¡œê·¸ë˜ë° ë¬¸ì œë¥¼ í’€ë‹¤ë³´ë©´ ìš°ì„ ìˆœìœ„ íë¥¼ í™œìš©í•´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ì¢…ì¢… ìˆìŠµë‹ˆë‹¤.

#

ë‹¤ë§Œ ìš°ì„ ìˆœìœ„ íëŠ” ì¼ë°˜ì ì¸ íë‚˜ ë°°ì—´ì´ ì•„ë‹Œ **í™**ì„ ê¸°ë°˜ìœ¼ë¡œ êµ¬í˜„ë˜ì—ˆê¸° ë•Œë¬¸ì— ì´ë¥¼ ì§ì ‘ êµ¬í˜„í•´ì„œ ì‚¬ìš©í•˜ê¸°ì—ëŠ” ì‹œê°„ì´ ì¡°ê¸ˆ ê±¸ë¦´ ìˆ˜ë„ ìˆëŠ”ë°ìš”,  
ë‹¤í–‰íˆ íŒŒì´ì¬ì—ì„œëŠ” ìµœì†Œ í™ì„ ë‚´ì¥ ëª¨ë“ˆë¡œ ì œê³µí•´, ì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìš°ì„ ìˆœìœ„ íë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

> **â° ë“¤ì–´ê°€ê¸° ì „ì—**
>
> ìš°ì„ ìˆœìœ„ íë¥¼ êµ¬í˜„í•œ `PriorityQueue` ë¼ëŠ” ëª¨ë“ˆë„ ì¡´ì¬í•˜ì§€ë§Œ, `heapq` ë³´ë‹¤ í›¨ì”¬ ëŠë¦¬ê²Œ ë™ì‘í•˜ë¯€ë¡œ ì½”ë”© í…ŒìŠ¤íŠ¸ìš©ìœ¼ë¡œëŠ” ì í•©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
>
> ë”°ë¼ì„œ ì´ë²ˆ ê¸€ì—ì„œëŠ” `heapq` ëª¨ë“ˆì„ í†µí•´ ìš°ì„ ìˆœìœ„ íë¥¼ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì„ ì†Œê°œí•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

ë¨¼ì € `heapq` ëª¨ë“ˆì„ í†µí•´ ìš°ì„ ìˆœìœ„ íë¥¼ êµ¬í˜„í•  ë•ŒëŠ” ë¦¬ìŠ¤íŠ¸ë¥¼ ìƒì„±í•œ í›„, `heapq` ëª¨ë“ˆì˜ ë©”ì„œë“œë¥¼ í†µí•´ íì— ì›ì†Œë¥¼ ì‚½ì…í•˜ê±°ë‚˜ ì œê±°í•©ë‹ˆë‹¤.

- `heappush` : ë¦¬ìŠ¤íŠ¸(í™)ì— ê°’ì„ ì‚½ì…í•©ë‹ˆë‹¤.
- `heappop` : ìš°ì„ ìˆœìœ„ê°€ ë†’ì€(= ê°’ì´ ì‘ì€) ìˆœì„œëŒ€ë¡œ ê°’ì„ ì¸ì¶œí•©ë‹ˆë‹¤.

```python
from heapq import *

# ì¼ë°˜ì ì¸ ë¦¬ìŠ¤íŠ¸ë¥¼ ì„ ì–¸í•©ë‹ˆë‹¤.
pq = []

# pq ë¦¬ìŠ¤íŠ¸ì— 1ì„ ì‚½ì…í•©ë‹ˆë‹¤.
heappush(pq, 1)

# pq ë¦¬ìŠ¤íŠ¸ì—ì„œ ìš°ì„ ìˆœìœ„(ê°’)ê°€ ê°€ì¥ ë‚®ì€ ì›ì†Œë¥¼ pop í•©ë‹ˆë‹¤.
heappop(pq)
```

`heapq` ëª¨ë“ˆì„ ì‚¬ìš©í•´ ì›ì†Œë¥¼ ì‚½ì…í•  ë•ŒëŠ” ì¼ë°˜ì ì¸ íì™€ ìœ ì‚¬í•˜ì§€ë§Œ, ì›ì†Œë¥¼ íì—ì„œ ëº„ ë•ŒëŠ” ì–¸ì œë‚˜ **ì‘ì€ ê°’**ì„ ë¨¼ì € ë‚´ë³´ë‚¸ë‹¤ëŠ” íŠ¹ì§•ì´ ìˆìŠµë‹ˆë‹¤.

```python
from heapq import *

pq = []

heappush(pq, 1)
heappush(pq, 5)
heappush(pq, 2)
heappush(pq, 4)
heappush(pq, 3)

print(heappop(pq)) # 1
print(heappop(pq)) # 2
print(heappop(pq)) # 3
print(heappop(pq)) # 4
print(heappop(pq)) # 5
```

ë˜, ë‘˜ ì´ìƒì˜ ë¹„êµëŒ€ìƒì„ íŠœí”Œ í˜•íƒœì˜ ì¸ìë¡œ ë°›ìœ¼ë©´ íŠœí”Œì˜ ì›ì†Œë¥¼ ì°¨ë¡€ë¡œ ë¹„êµí•´ê°€ë©° ìš°ì„ ìˆœìœ„ë¥¼ ê²°ì •í•©ë‹ˆë‹¤.

> âœ… ì£¼ë¡œ `(ìš°ì„ ìˆœìœ„, ê°’)` ì˜ í˜•íƒœë¡œ ê°’ì„ ì‚½ì…í•´ ìš°ì„ ìˆœìœ„ íë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤!

```python
from heapq import *
pq = []

heappush(pq, (1, 2, 4))
heappush(pq, (2, 1, 1))
heappush(pq, (1, 3, 4))
heappush(pq, (1, 3, 3))
heappush(pq, (1, 2, 3))

# "íŠœí”Œì˜ ì²« ë²ˆì§¸ ì›ì†Œ - ë‘ ë²ˆì§¸ ì›ì†Œ - ì„¸ ë²ˆì§¸ ì›ì†Œ" ê°€ ì‘ì€ ìˆœì„œëŒ€ë¡œ ì¸ì¶œëœ ëª¨ìŠµì…ë‹ˆë‹¤.
print(heappop(pq)) # (1, 2, 3)
print(heappop(pq)) # (1, 2, 4)
print(heappop(pq)) # (1, 3, 3)
print(heappop(pq)) # (1, 3, 4)
print(heappop(pq)) # (2, 1, 1)
```

ìš°ì„ ìˆœìœ„ íì˜ ì‚¬ìš©ë²•ì„ ì—°ìŠµí•´ë³´ê³  ì‹¶ë‹¤ë©´, ì•„ë˜ 3ë¬¸ì œë¥¼ í’€ì–´ë³´ë©´ì„œ ê°ì„ ì¡ì•„ ë³´ëŠ” ê²ƒì„ ì¶”ì²œë“œë¦½ë‹ˆë‹¤. ğŸ™‚

1.  [14593ë²ˆ - 2017 ì•„ì£¼ëŒ€í•™êµ í”„ë¡œê·¸ë˜ë° ê²½ì‹œëŒ€íšŒ (Large)](https://www.acmicpc.net/problem/14593)
2.  [11279ë²ˆ - ìµœëŒ€ í™](https://www.acmicpc.net/problem/11279)
3.  [1715ë²ˆ - ì¹´ë“œ ì •ë ¬í•˜ê¸°](https://www.acmicpc.net/problem/1715)

---

## ë¶€ë¡. `PriorityQueue` ì™€ `heapq` ê¸°ë°˜ í™ ì—°ì‚° ìˆ˜í–‰ì†ë„ ë¹„êµ

```python
# heapqì™€ PriorityQueueì˜ ì†ë„ ì°¨ì´ë¥¼ ë¹„êµí•˜ê¸° ìœ„í•œ ì½”ë“œì…ë‹ˆë‹¤.

from queue import PriorityQueue
from time import time
from heapq import *
import random

nums = [random.random() for _ in range(100000)]

pq_priority_queue = PriorityQueue()
pq_heapq = []

start = time()
for i in range(len(nums)):
    pq_priority_queue.put(nums[i])

for i in range(len(nums)):
    pq_priority_queue.get()
end = time()
print(f'PriorityQueue ë™ì‘ ì‹œê°„ : {end - start:.6f}')

start = time()
for i in range(len(nums)):
    heappush(pq_heapq, nums[i])

for i in range(len(nums)):
    heappop(pq_heapq)
end = time()

print(f'heapq ë™ì‘ ì‹œê°„ : {end - start:.6f}')
```

![ë°ì´í„° 10ë§Œê°œ ê¸°ì¤€ ì‚½ì… Â· ì¸ì¶œ ì—°ì‚° ì†Œìš”ì‹œê°„](/posts/íŒŒì´ì¬ì—ì„œ-ìš°ì„ ìˆœìœ„-í-ì‚¬ìš©í•˜ê¸°/0.png "600px")

`PriorityQueue`ê°€ ì‚¬ìš©í•˜ê¸°ì—ëŠ” ë” í¸í•˜ê³  ì§ê´€ì ì´ê¸°ëŠ” í•˜ì§€ë§Œ, [Thread Safe](https://sisyphus.gitbook.io/project/python-notes/heapq-vs.-q.priorityqueue) ì²´í¬ë¡œ ì¸í•´ `heapq`ì— ë¹„í•´ ìœ ì˜ë¯¸í•œ ìˆ˜ì¤€ìœ¼ë¡œ ëŠë¦¬ë‹¤ëŠ” ë‹¨ì ì´ ì¡´ì¬í•©ë‹ˆë‹¤.

ì‹¤ì œë¡œ ì´ë¡œ ì¸í•´ í†µê³¼ ì—¬ë¶€ê°€ ê°ˆë¦¬ëŠ” ë¬¸ì œë„ ì¡´ì¬í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ì½”ë”© í…ŒìŠ¤íŠ¸ì—ì„œ ìš°ì„ ìˆœìœ„ íë¥¼ ì‚¬ìš©í•˜ê³ ì í•  ë•ŒëŠ” ë°˜ë“œì‹œ `heapq`ë¥¼ ì‚¬ìš©í•  ê²ƒì„ ê¶Œí•´ë“œë¦½ë‹ˆë‹¤! ğŸ˜„
