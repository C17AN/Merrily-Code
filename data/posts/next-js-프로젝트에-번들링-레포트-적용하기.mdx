---
title: Next.js í”„ë¡œì íŠ¸ì— ë²ˆë“¤ë§ ë ˆí¬íŠ¸ ì ìš©í•˜ê¸°
date: "2022-02-13"
description: "@next/bundle-analyzer í”ŒëŸ¬ê·¸ì¸ìœ¼ë¡œ ë¹Œë“œëœ ë²ˆë“¤ ê²°ê³¼ë¬¼ì„ ë¶„ì„í•´ë´…ì‹œë‹¤."
category: next
thumbnailUrl: "/thumbnails/next.svg"
tags: ["Next.js", "Webpack"]
---

[ë¦¬ì•¡íŠ¸ ì•± ìµœì í™” ë°©ë²•](https://betterprogramming.pub/3-ways-to-optimize-your-react-bundle-with-webpack-5e2711effd54) ì— ëŒ€í•œ ë¸”ë¡œê·¸ ê¸€ì„ ì½ë˜ ì¤‘, `Webpack Bundle Analyzer` ë¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ í¥ë¯¸ë¡œì›Œ ë³´ì—¬ ì´ë¥¼ `Next.js` í”„ë¡œì íŠ¸ì— ì ìš©í•˜ê¸° ìœ„í•œ ë°©ë²•ì„ ì°¾ì•„ ì •ë¦¬í•œ ë‚´ìš©ì…ë‹ˆë‹¤. ğŸ™‚

![ë ˆí¬íŠ¸ëŠ” ì´ëŸ° ì‹ìœ¼ë¡œ ìƒê²¼ëŠ”ë°, ì €ê²Œ ë‹¤ ë²ˆë“¤ë§ëœ íŒŒì¼ ë©ì–´ë¦¬ëë‹ˆë‹¤!](/posts/next-js-í”„ë¡œì íŠ¸ì—-ë²ˆë“¤ë§-ë ˆí¬íŠ¸-ì ìš©í•˜ê¸°/1.png "600px")

`Webpack Bundle Analyzer` ëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ë¹Œë“œí•˜ë©´ ìë™ìœ¼ë¡œ ë²ˆë“¤ë§ëœ íŒŒì¼ êµ¬ì¡° ë° ì••ì¶•ë¥ ì„ ì‹œê°í™”í•´ ë³´ì—¬ì£¼ëŠ” íˆ´ë¡œ, ë³µì¡í•œ ì›¹íŒ© ì„¤ì • ì—†ì´ë„ ê°„ë‹¨íˆ ì ìš©í•  ìˆ˜ ìˆë‹¤ëŠ” í° ì¥ì ì´ ìˆìŠµë‹ˆë‹¤.

## @next/bundle-analyzer

`@next/bundle-analyzer` ëŠ” `Webpack Bundle Analyzer` ë¥¼ `Next.js` ì— ì ìš©í•  ìˆ˜ ìˆë„ë¡ í•œ í”ŒëŸ¬ê·¸ì¸ìœ¼ë¡œ, ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```shell
# yarn ì‚¬ìš©ì‹œ
yarn add -D @next/bundle-analyzer

# npm ì‚¬ìš©ì‹œ
npm i -D @next/bundle-analyzer
```

ì„¤ì¹˜ê°€ ëë‚˜ë©´ ë°”ë¡œ `next.config.js` íŒŒì¼ì— ì§„ì…í•´ ë‹¤ìŒê³¼ ê°™ì´ í”ŒëŸ¬ê·¸ì¸ì„ ì ìš©í•©ë‹ˆë‹¤.

```jsx
const withBundleAnalyzer = require("@next/bundle-analyzer")({
  enabled: process.env.ANALYZE === "true",
});

module.exports = withBundleAnalyzer({});
```

ì—¬ê¸°ì„œ ì˜ì¡´í•  í™˜ê²½ ë³€ìˆ˜ì˜ ì´ë¦„ì„ `ANALYZE` ë¡œ ì§€ì •í–ˆëŠ”ë°, í™˜ê²½ ë³€ìˆ˜ì˜ ì´ë¦„ì€ ì›í•˜ëŠ” ëŒ€ë¡œ ì§€ì–´ë„ ê´œì°®ìŠµë‹ˆë‹¤.

> ğŸš¨Â **Tip!**
> í”ŒëŸ¬ê·¸ì¸ì˜ `enabled` ì†ì„±ì€ ë°˜ë“œì‹œ í™˜ê²½ ë³€ìˆ˜ë¥¼ í†µí•´ **ë¹Œë“œ ì‹œì—ë§Œ** `true` **ê°’ì´ ì ìš©ë˜ë„ë¡** í•´ì•¼ í•©ë‹ˆë‹¤.
>
> #
>
> ë§Œì•½ í•­ìƒ `true` ê°’ì„ ì „ë‹¬í•˜ë©´, ê°œë°œ í™˜ê²½ì—ì„œ í˜ì´ì§€ë¥¼ ì¬ë Œë”ë§í•  ë•Œë§ˆë‹¤ ë ˆí¬íŠ¸ê°€ ìƒì„± & ì¶œë ¥ë˜ì–´ ê°œë°œ ì„±ëŠ¥ì— ì‹¬ê°í•œ ì§€ì¥ì„ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤! ğŸ˜±

## í™˜ê²½ ë³€ìˆ˜ ì ìš©í•˜ê¸°

ë‹¤ìŒì€ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì„ ì–¸í•´ ë³´ê² ìŠµë‹ˆë‹¤.

ìœ„ì—ì„œ ì„œìˆ í•œ ë¬¸ì œë¡œ ì¸í•´ **ë¹Œë“œ ì‹œ** ì—ë§Œ ë ˆí¬íŠ¸ê°€ ì¶œë ¥ë˜ì–´ì•¼ í•˜ë¯€ë¡œ, `cross-env` ë¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í†µí•´ ë¹Œë“œ ì‹œì—ë§Œ í™˜ê²½ ë³€ìˆ˜ë¥¼ ë„˜ê²¨ ì£¼ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

```jsx
yarn add -D cross-env
```

ì´ì œ `package.json` ì— í™˜ê²½ ë³€ìˆ˜ë¥¼ ì ìš©í•´ ë¹Œë“œë¥¼ ìˆ˜í–‰í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.
(ë¬¼ë¡  ìŠ¤í¬ë¦½íŠ¸ ì´ë¦„ì´ ë°˜ë“œì‹œ `build:local` ì—¬ì•¼ë§Œ í•  í•„ìš”ëŠ” ì—†ìŠµë‹ˆë‹¤.)

```json
"scripts": {
    "dev": "next dev",
    "build": "next build",
    "build:local": "cross-env ANALYZE=true next build",
		...
  }
```

> ğŸ§Â **Why?** - **ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì´ë ‡ê²Œ ì„ ì–¸í•œ ì´ìœ ëŠ”?**
>
> #
>
> vercel ë“±ì˜ ë°°í¬ í™˜ê²½ì—ì„œë„ ë²ˆë“¤ë§ ë ˆí¬íŠ¸ê°€ ìƒì„±ë˜ê¸°ëŠ” í•˜ì§€ë§Œ, ë ˆí¬íŠ¸ë¥¼ **ë°°í¬ í™˜ê²½ì—ì„œ ì¶œë ¥í•  ìˆ˜ ìˆëŠ”** ë°©ë²•ì€ ì•„ì§ ì°¾ì§€ ëª»í–ˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.  
> ë”°ë¼ì„œ í˜„ì¬ ê¸€ì—ì„œëŠ” **ë¡œì»¬ ë¹Œë“œ ì‹œì—ë§Œ** ë²ˆë“¤ë§ ë ˆí¬íŠ¸ë¥¼ ì¶œë ¥í•˜ë„ë¡ í•˜ê³ , ë°°í¬ í™˜ê²½ì—ì„œì˜ ë¹Œë“œëŠ” ê¸°ì¡´ ë¹Œë“œ ì»¤ë§¨ë“œë¥¼ ì ìš©í•˜ê¸° ìœ„í•¨ì…ë‹ˆë‹¤.

ì´ì œ `build:local` ì»¤ë§¨ë“œë¥¼ ì‹¤í–‰í•˜ë©´, ë¹Œë“œ ê²°ê³¼ë¬¼ ë””ë ‰í† ë¦¬ì— ë²ˆë“¤ë§ ë ˆí¬íŠ¸ê°€ ìƒì„±ë©ë‹ˆë‹¤.

```json
yarn run v1.22.11
warning ../../../package.json: No license field
$ cross-env ANALYZE=true next build
info  - Checking validity of types
Webpack Bundle Analyzer saved report to /Users/chanmin/Documents/project/portfolio/.next/analyze/client.html
Webpack Bundle Analyzer saved report to /Users/chanmin/Documents/project/portfolio/.next/server/analyze/server.html
info  - Creating an optimized production build
info  - Compiled successfully
info  - Collecting page data
info  - Generating static pages (60/60)
info  - Finalizing page optimization
```

![.next í´ë”ì— ë²ˆë“¤ë§ ë ˆí¬íŠ¸ ë¬¸ì„œê°€ ì¶”ê°€ëœ ëª¨ìŠµ](/posts/next-js-í”„ë¡œì íŠ¸ì—-ë²ˆë“¤ë§-ë ˆí¬íŠ¸-ì ìš©í•˜ê¸°/0.png "650px")

![í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ë²ˆë“¤ë§ ë ˆí¬íŠ¸](/posts/next-js-í”„ë¡œì íŠ¸ì—-ë²ˆë“¤ë§-ë ˆí¬íŠ¸-ì ìš©í•˜ê¸°/1.png "800px")

![ì„œë²„ ì‚¬ì´ë“œ ë²ˆë“¤ë§ ë ˆí¬íŠ¸](/posts/next-js-í”„ë¡œì íŠ¸ì—-ë²ˆë“¤ë§-ë ˆí¬íŠ¸-ì ìš©í•˜ê¸°/2.png "800px")

![ë§ˆìš°ìŠ¤ í˜¸ë²„ ì‹œ, ë²ˆë“¤ëœ íŒŒì¼ì˜ ìš©ëŸ‰ ë° ì••ì¶•ë¥ ì´ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.](/posts/next-js-í”„ë¡œì íŠ¸ì—-ë²ˆë“¤ë§-ë ˆí¬íŠ¸-ì ìš©í•˜ê¸°/3.png "700px")

ë²ˆë“¤ë§ ë ˆí¬íŠ¸ë¥¼ ì½ì–´ë³´ë©´ ë²ˆë“¤ë§ëœ íŒŒì¼ë“¤ì´ ì°¨ì§€í•˜ëŠ” ìš©ëŸ‰ê³¼, ì›ë³¸ íŒŒì¼ ëŒ€ë¹„ ì–¼ë§ˆë‚˜ ì••ì¶•ë˜ì—ˆëŠ”ì§€ë¥¼ í•œëˆˆì— í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì¢‹ì€ ì•„ì´ë””ì–´ê°€ ë– ì˜¤ë¥´ë©´ ë²ˆë“¤ë§ ë ˆí¬íŠ¸ë¥¼ ì´ìš©í•œ íˆ´ ê°œë°œê¸°ë„ ì‘ì„±í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤! ğŸ™‚
